<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="../bower_components/core-tooltip/core-tooltip.html">
<link rel="import" href="../bower_components/core-icon/core-icon.html">
<link rel="import" href="../bower_components/core-icons/core-icons.html">

<polymer-element name="loot-plugin-item">
    <template>
        <style>
        :host([data-bsa=false]) #loadsBSA,
        :host([data-dummy=false]) #dummyPlugin,
        :host([data-edits=false]) #hasUserEdits,
        :host([data-global-priority=false]) #hasGlobalPriority,
        :host #hasPriority:not([label^=Priority]) {
            visibility: hidden;
        }
        a {
            text-decoration: none;
            color: black;
        }
        .hasGlobalPriority, #hasPriority {
            display:none;
        }
        :host-context(body.editMode) #hasGlobalPriority,
        :host-context(body.editMode) #hasPriority {
            display: inline-block;
        }
        </style>

        <paper-item>
            <core-tooltip id="dummyPlugin" label="Dummy Plugin">
                <core-icon icon="visibility-off"></core-icon>
            </core-tooltip>
            <core-tooltip id="loadsBSA" label="Loads BSA">
                <core-icon icon="attachment"></core-icon>
            </core-tooltip>
            <core-tooltip id="hasUserEdits" label="Has User Metadata">
                <core-icon icon="account-circle"></core-icon>
            </core-tooltip>
            <core-tooltip id="hasGlobalPriority" label="Priority Is Global">
                <core-icon icon="language"></core-icon>
            </core-tooltip>
            <core-tooltip id="hasPriority" label="">
                <core-icon icon="star"></core-icon>
            </core-tooltip>
            <a id="link" href=""></a>
        </paper-item>
    </template>
    <script>
    Polymer({
        setLink: function(id, name) {
            this.shadowRoot.getElementById('link').href = '#' + id;
            this.shadowRoot.getElementById('link').textContent = name;
        },

        getName: function() {
            return this.shadowRoot.getElementById('link').textContent;
        },

        setPriority: function(text) {
            this.shadowRoot.getElementById('hasPriority').label = text;
        },

        handleDragStart: function(evt) {
            evt.dataTransfer.effectAllowed = 'copy';
            evt.dataTransfer.setData('text/plain', evt.currentTarget.getName());
        },
    });
    </script>
</polymer-element>